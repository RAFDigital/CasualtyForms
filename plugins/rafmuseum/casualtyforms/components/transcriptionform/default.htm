{% partial '@imagezoom' %}

<form data-request="onSave">
    <div class="row">
        <div class="form-group col-sm-6">
            <label for="casualtyRank">Rank</label>
            <select id="casualtyRank" class="form-control" name="rank">
                <option disabled selected>- Select the rank from the form -</option>
                <option {% if record.rank == "2nd Lieut."%}selected{% endif %}>2nd Lieut.</option>
                <option {% if record.rank == "Lieut."%}selected{% endif %}>Lieut.</option>
                <option {% if record.rank == "Captain"%}selected{% endif %}>Captain</option>
                <option {% if record.rank == "Major"%}selected{% endif %}>Major</option>
                <option {% if record.rank == "Lt.-Col."%}selected{% endif %}>Lt.-Col.</option>
                <option {% if record.rank == "Colonel"%}selected{% endif %}>Colonel</option>
            </select>
        </div>

        <div class="form-group col-sm-6">
            {% partial 'transcriptionform::textfield'
                id="casualtyRegimentCorps"
                name="regiment_corps"
                label="Regiment/Corps"
                recordValue=record.regiment_corps %}
        </div>
    </div>

    <div class="row">
        <div class="form-group col-sm-8">
            {% partial 'transcriptionform::textfield'
                id="casualtyFnames"
                name="first_names"
                label="First names"
                recordValue=record.first_names %}
        </div>

        <div class="form-group col-sm-4">
            {% partial 'transcriptionform::textfield'
                id="casualtySurname"
                name="surname"
                label="Surname"
                recordValue=record.surname %}
        </div>
    </div>

    <div class="row">
        <div class="form-group col-sm-4">
            {% partial 'transcriptionform::datefield'
                id="casualtyReportDateFirst"
                name="report_date_first"
                label="Date of first report"
                recordValue=record.report_date_first %}
        </div>

        <div class="form-group col-sm-4">
            {% partial 'transcriptionform::datefield'
                id="casualtyReportDateLast"
                name="report_date_last"
                label="Date of last report"
                recordValue=record.report_date_last %}
        </div>

        <div class="form-group col-sm-4">
            {% partial 'transcriptionform::datefield'
                id="casualtyDeathDate"
                name="death_date"
                label="Date of death"
                recordValue=record.death_date %}
        </div>
    </div>

    <div class="form-group">
        <input id="medicalInfo" type="checkbox" name="medical_information" value="{{ record.medical_information }}" />
        <label for="medicalInfo">Medical information <small>Advisory text</small></label>
    </div>

    <input type="hidden" name="id" value="{{ record.id }}" />

    {% if transcriptionStage == 'transcribe'%}
        <input type="hidden" name="completed_by" value="{{ user.id }}" />
        <button type="submit" class="btn btn-primary">Save</button>
        <a href="{{ 'transcribe-list'|page({ stage: 'transcribe' }) }}" class="btn btn-default">Cancel</a>
    {% elseif transcriptionStage == 'approve' %}
        <input type="hidden" name="approved_by" value="{{ user.id }}" />
        <button type="submit" class="btn btn-success">Approve</button>
        <a href="{{ 'transcribe-list'|page({ stage: 'approve' }) }}" class="btn btn-default">Cancel</a>
    {% endif %}

    {% flash success %}
        <p>{{ message }}</p>
    {% endflash %}
</form>
