{% partial "@imagezoom" imgSrc=url ~ config.cms.storage.media.path ~ form.filename %}

<form data-request="onSave">

    <div id="additionalHidden" {% if form.additional_page %}style="display: none"{% endif %}>

        <div class="form-group">
            <label for="casualtyRank">Rank</label>

            <div class="checkbox">
                <label class="checkbox-inline">
                    <input type="checkbox" name="rank[]" value="2nd Lieut."
                        {% if "2nd Lieut." in form.rank %}checked{% endif %} />2nd Lieut.
                </label>

                <label class="checkbox-inline">
                    <input type="checkbox" name="rank[]" value="Lieut."
                        {% if "Lieut." in form.rank %}checked{% endif %} />Lieut.
                </label>

                <label class="checkbox-inline">
                    <input type="checkbox" name="rank[]" value="Captain"
                        {% if "Captain" in form.rank %}checked{% endif %} />Captain
                </label>

                <label class="checkbox-inline">
                    <input type="checkbox" name="rank[]" value="Major"
                        {% if "Major" in form.rank %}checked{% endif %} />Major
                </label>

                <label class="checkbox-inline">
                    <input type="checkbox" name="rank[]" value="Lt.-Col."
                        {% if "Lt.-Col." in form.rank %}checked{% endif %} />Lt.-Col.
                </label>

                <label class="checkbox-inline">
                    <input type="checkbox" name="rank[]" value="Colonel"
                        {% if "Colonel" in form.rank %}checked{% endif %} />Colonel
                </label>
            </div>

        </div>

        <div class="form-group">
            {% partial 'transcriptionform::textfield'
                id="casualtyRegimentCorps"
                name="regiment_corps"
                label="Regiment/Corps"
                recordValue=form.regiment_corps %}
        </div>

        <div class="row">
            <div class="form-group col-sm-8">
                {% partial 'transcriptionform::textfield'
                    id="casualtyFnames"
                    name="first_names"
                    label="Christian names"
                    recordValue=form.first_names %}
            </div>

            <div class="form-group col-sm-4">
                {% partial 'transcriptionform::textfield'
                    id="casualtySurname"
                    name="surname"
                    label="Surname"
                    recordValue=form.surname %}
            </div>
        </div>

    </div>

    <div id="parentPage" class="form-group row" style="display: none">
        <img class="col-md-6" src="{{ url }}{{ config.cms.storage.media.path }}{{ form.filename }}" />
        <img class="col-md-6" src="{{ url }}{{ config.cms.storage.media.path }}{{ form.filename }}" />
    </div>

    <div class="row">
        <div class="form-group col-sm-4">
            {% partial 'transcriptionform::datefield'
                id="casualtyReportDateFirst"
                name="report_date_first"
                label="Date of first report"
                recordValue=form.report_date_first %}
        </div>

        <div class="form-group col-sm-4">
            {% partial 'transcriptionform::datefield'
                id="casualtyReportDateLast"
                name="report_date_last"
                label="Date of last report"
                recordValue=form.report_date_last %}
        </div>

        <div class="form-group col-sm-4">
            {% partial 'transcriptionform::datefield'
                id="casualtyDeathDate"
                name="death_date"
                label="Date of death"
                recordValue=form.death_date %}
        </div>
    </div>

    <div class="form-group">
        <input id="medicalInfo" type="checkbox" name="medical_information"
            value="1" data-toggle="toggle"  data-on="Yes" data-off="No"
            {% if form.medical_information %}checked{% endif %} />
        <label class="m-l" for="medicalInfo">
            Is there any additional medical information on the form?
        </label>
    </div>

    <div class="form-group">
        <input id="additionalPage" type="checkbox" name="additional_page"
            value="1" data-toggle="toggle" data-on="Yes" data-off="No"
            onchange="$('#additionalHidden, #parentPage').slideToggle()"
            {% if form.additional_page %}checked{% endif %} />
        <label class="m-l" for="additionalPage"data-toggle="tooltip" data-placement="top"
            title="Some of these forms are additional pages, or back-pages, to other forms.
            Check this box if the form looks like it's an addition to a previous form.">
            Is this an additional page?
        </label>
    </div>

    <input type="hidden" name="id" value="{{ form.id }}" />

    <div class="form-group pull-right">
        {% if stage == 'new'%}
            <input type="hidden" name="completed_by" value="{{ user.id }}" />
            <button type="submit" class="btn btn-primary">Save</button>
        {% elseif stage == 'approve' %}
            <input type="hidden" name="approved_by" value="{{ user.id }}" />
            <button type="submit" class="btn btn-success">Approve</button>
        {% endif %}
    </div>

    {% flash success %}
        <p>{{ message }}</p>
    {% endflash %}
</form>
